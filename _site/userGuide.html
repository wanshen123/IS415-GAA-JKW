<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.536">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>IS415-GAA-JinYuan&amp;WanShen - IS415-GAA Group 6: User Guide - Geospatial Analysis of Recycling Bin Distribution in Singapore</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">IS415-GAA-JinYuan&amp;WanShen</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Proposal/Proposal.html"> 
<span class="menu-text">Proposal</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./dataPreProcess.html"> 
<span class="menu-text">Data Pre-Processing</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./userGuide.html" aria-current="page"> 
<span class="menu-text">User-Guide</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./poster.html"> 
<span class="menu-text">Poster</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://recyclewatch.shinyapps.io/recyclesgshiny/"> 
<span class="menu-text">Shiny App</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#user-guide" id="toc-user-guide" class="nav-link active" data-scroll-target="#user-guide">User Guide</a></li>
  <li><a href="#navigation" id="toc-navigation" class="nav-link" data-scroll-target="#navigation">Navigation</a></li>
  <li><a href="#home" id="toc-home" class="nav-link" data-scroll-target="#home">Home</a></li>
  <li><a href="#exploratory-data-analysis" id="toc-exploratory-data-analysis" class="nav-link" data-scroll-target="#exploratory-data-analysis">Exploratory Data Analysis</a></li>
  <li><a href="#first-order-spatial-point-pattern-analysis" id="toc-first-order-spatial-point-pattern-analysis" class="nav-link" data-scroll-target="#first-order-spatial-point-pattern-analysis">First-order Spatial Point Pattern Analysis</a></li>
  <li><a href="#hot-spot-and-cold-spot-area-analysis" id="toc-hot-spot-and-cold-spot-area-analysis" class="nav-link" data-scroll-target="#hot-spot-and-cold-spot-area-analysis">Hot Spot and Cold Spot Area Analysis</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">IS415-GAA Group 6: User Guide - Geospatial Analysis of Recycling Bin Distribution in Singapore</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">30/03/2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="user-guide" class="level1">
<h1>User Guide</h1>
<p>RecycleSG Shiny App User Guide: You can access the Shiny application <a href="https://recyclewatch.shinyapps.io/recyclesgshiny/">here</a>.</p>
</section>
<section id="navigation" class="level1">
<h1>Navigation</h1>
<p>The navigation bar will be located at the top of the page. The navigation bar will contain the following tabs: Home, Exploratory Data Analysis, First-order Spatial Point Pattern Analysis, Hot Spot and Cold Spot Area Analysis. Select tab will be highlighted in <strong>black</strong>.</p>
<p><img src="image/Navbar.png" class="img-fluid"></p>
<p>For first-order spatial point pattern analysis &amp; hot spot and cold spot area analysis, you can navigate to the respective subtabs under the main tab.</p>
<p><img src="image/SPP_subtab.png" class="img-fluid"> <img src="image/HCSA_subtab.png" class="img-fluid"></p>
</section>
<section id="home" class="level1">
<h1>Home</h1>
<p>The section provides a summary of the project’s motivation and outlines the various types of geospatial analytic techniques employed in our Shiny App.</p>
</section>
<section id="exploratory-data-analysis" class="level1">
<h1>Exploratory Data Analysis</h1>
<p>The Exploratory Data Analysis page features an interactive map showcasing the distribution of recycling bins across Singapore. Users can filter the data by the type of recycling bin (Blue Bin, E-Waste Bin, Incentive Bin and All) and visualize it alongside Singapore’s population density. Additionally, users have the option to switch between different map display types such as CartoDB, OpenStreetMap, and Esri.</p>
<p><img src="image/EDA.png" class="img-fluid"></p>
<p>Currently, there is no map available that allows the display of the different types of recycling bins in Singapore. However, the application enables users to visualize the distribution of Blue Bins, E-Waste Bins, and Incentive Bins across various locations in Singapore. Enhancing valuable insights into the accessibility and availability of different types of recycling facilities within the city-state.</p>
<p><strong>Instruction:</strong></p>
<ol type="1">
<li><p>Select the type of map you wish to view by clicking on the dropdown menu.</p></li>
<li><p>There are a total of 3 types of maps available: CartoDB, OpenStreetMap, and Esri.</p></li>
<li><p>Click on any of the map types to change the map display.</p></li>
<li><p>Select the type of recycling bin you wish to view by clicking on the dropdown menu.</p></li>
<li><p>There are a total of 4 types of recycling bins available: Blue Bin, E-Waste Bin, Incentive Bin and All Bins.</p></li>
<li><p>Click on any of the recycling bin types to filter the data and view the distribution of the selected recycling bin type.</p></li>
<li><p>Tick or untick the checkbox to view the population density in Singapore.</p></li>
<li><p>Hover over the markers on the map to view the location of the bins.</p></li>
<li><p>Use the zoom in and zoom out buttons to adjust the map view.</p></li>
<li><p>Click on the markers to view the details of the bins.</p></li>
</ol>
</section>
<section id="first-order-spatial-point-pattern-analysis" class="level1">
<h1>First-order Spatial Point Pattern Analysis</h1>
<p>The First-order Spatial Point Pattern Analysis page comprises three subtabs: Introduction, Kernel Density Estimation, and Network Constrained KDE Analysis.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset nav-pills">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Introduction</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">KDE</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">NetKDE</a></li></ul>
<div class="tab-content nav-pills">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>The Introduction subtab provides an overview of the first-order spatial point pattern analysis for recycling bin placement in Singapore. It delves into the significance of spatial point pattern analysis in identifying clustering patterns and spatial relationships among recycling bins. By leveraging this analytical technique, users can gain valuable insights into the distribution of recycling bins across Singapore.</p>
<p><img src="image/firstOrderIntro.png" class="img-fluid"></p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>The KDE (Kernel Density Estimation) subtab offers a detailed explanation of the KDE analysis for recycling bin placement in Singapore. By elucidating the theoretical underpinnings of KDE analysis, users can better understand the spatial distribution of recycling bins and identify areas with high and low bin density. This section not only highlights the benefits of KDE analysis but also provides practical guidance on its application in optimizing placement of recycling bins.</p>
<p><img src="image/KDE.png" class="img-fluid"></p>
<p><strong>Instruction:</strong></p>
<ol type="1">
<li><p>Select the type of bandwidth you wish to use by clicking on the dropdown menu.</p></li>
<li><p>There are a total of 2 types of bandwidth available: Fixed and Adaptive.</p></li>
<li><p>Click on any of the bandwidth types to change the KDE map display.</p></li>
<li><p>By selecting fixed bandwidth, you are provided with the different type of kernels and bandwidth to choose from.</p></li>
<li><p>There are a total of 4 types of kernels available: Quartic, Gaussian, Epanechnikov, and Disc.</p></li>
<li><p>There are a total of 4 types of bandwidth available: diggle, ppl, CvL and scott.</p></li>
<li><p>Click on any of the kernels and bandwidth to change the KDE map display.</p></li>
<li><p>Use the zoom in and zoom out buttons to adjust the map view.</p></li>
</ol>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p>The NetKDE (Network Constrained KDE) subtab within this user guide offers a comprehensive understanding of the NetKDE analysis for recycling bin placement in Singapore. By exploring the nuances of network-constrained KDE analysis, users can gain insights into the spatial distribution of recycling bins along road networks. This section not only elucidates the significance of NetKDE analysis but also provides practical guidance on leveraging this analytical technique to optimize placement of recycling bins effectively.</p>
<p><img src="image/NetKDE.png" class="img-fluid"></p>
<p><strong>Instruction:</strong></p>
<ol type="1">
<li><p>Select the type of bin you wish to view by clicking on the dropdown menu.</p></li>
<li><p>There are a total of 2 types of bins available: Blue Bin and E-Waste Bin.</p></li>
<li><p>Click on any of the bin types to filter the data and view the distribution of the selected bin type.</p></li>
<li><p>Select the area you wish to view by clicking on the dropdown menu.</p></li>
<li><p>There are a total of 25 areas available for selection.</p></li>
<li><p>Click on any of the areas to filter the data and view the distribution of the selected area.</p></li>
<li><p>Use the zoom in and zoom out buttons to adjust the map view.</p></li>
<li><p>Hover over the markers on the map to view the location of the bins.</p></li>
<li><p>Click on the markers to view the details of the bins.</p></li>
</ol>
</div>
</div>
</div>
</section>
<section id="hot-spot-and-cold-spot-area-analysis" class="level1">
<h1>Hot Spot and Cold Spot Area Analysis</h1>
<p>The Hot Spot and Cold Spot Area Analysis page comprises three subtabs: Introduction, Local Indicators of Spatial Association (LISA) Analysis, and Visualisation of Hot Spot and Cold Spot Areas.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset nav-pills">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Introduction</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">LISA</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">HCSA</a></li></ul>
<div class="tab-content nav-pills">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>The introduction subtab offers a concise overview of hotspot and coldspot analysis for recycling bin placement in Singapore. It delves into exploring the clustering of bins and pinpointing areas with abundant bin placement, as well as those with minimal to no presence. By highlighting the potential benefits derived from employing this analytics technique, we can gain valuable insights to optimize waste management strategies effectively</p>
<p><img src="image/HCSA_intro.png" class="img-fluid"></p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p>The LISA (Local Indicators of Spatial Association) subtab in this user guide serves as a pivotal resource for understanding and interpreting the LISA map effectively. By offering a detailed explanation of LISA map interpretation, users gain insights into the spatial patterns and relationships regarding recycling bin placement across Singapore. This section not only elucidates the theoretical underpinnings of LISA analysis but also provides practical guidance on its application in real-world scenarios.</p>
<p><img src="image/LISA.png" class="img-fluid"></p>
<p>Moreover, the LISA subtab enhances user interaction and customization through an intuitive interactive map interface. This feature empowers users to tailor their exploration experience by adjusting various parameters, including the type of recycling bin, significance level, and map type, to align with their specific requirements and objectives. Additionally, users can select different categories for generating the map, such as mean, median, and pysal, allowing for nuanced analysis and comparison.</p>
<p><strong>Instruction:</strong></p>
<ol type="1">
<li><p>Select the type of map you wish to view by clicking on the dropdown menu.</p></li>
<li><p>There are a total of 3 types of maps available: CartoDB, OpenStreetMap, and Esri.</p></li>
<li><p>Click on any of the map types to change the map display.</p></li>
<li><p>Use the slider to adjust the significance level. The significance level ranges from 0.05 to 0.2.</p></li>
<li><p>Click on the slider and drag it to the desired significance level.</p></li>
<li><p>Select the type of recycling bin you wish to view by clicking on the dropdown menu.</p></li>
<li><p>There are a total of 3 types of recycling bins available: Blue Bin, E-Waste Bin and Incentive Bin.</p></li>
<li><p>Click on any of the recycling bin types to filter the data and view the distribution of the selected recycling bin type.</p></li>
<li><p>Select the type of category you wish to view by clicking on the dropdown menu.</p></li>
<li><p>There are a total of 3 types of categories available: Mean, Median and Pysal.</p></li>
<li><p>Click on any of the categories to change the LISA map display.</p></li>
<li><p>Use the zoom in and zoom out buttons to adjust the map view.</p></li>
<li><p>Hover over the area to view the value of the selected category.</p></li>
<li><p>Click on the area to view the details of the selected category.</p></li>
</ol>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<p>The HCSA (Hotspot and Coldspot Analysis) subtab within this user guide offers a comprehensive understanding of interpreting the HCSA map. By delving into the nuances of hotspot and coldspot analysis, users gain insights into identifying areas of high and low activity regarding recycling bin placement in Singapore. This section not only elucidates the significance of these analytical techniques but also provides practical guidance on how to leverage the information gleaned from the HCSA map effectively.</p>
<p><img src="image/HCSA.png" class="img-fluid"> Furthermore, the HCSA subtab enhances user engagement by offering an interactive map interface. This feature empowers users to personalize their exploration experience by adjusting parameters such as the type of recycling bin, significance level, and map type. Whether users seek to analyze specific categories of recycling bins or explore different levels of significance, this interactive map caters to their diverse needs and preferences.</p>
<p><strong>Instruction:</strong></p>
<ol type="1">
<li><p>Select the type of map you wish to view by clicking on the dropdown menu.</p></li>
<li><p>There are a total of 3 types of maps available: CartoDB, OpenStreetMap, and Esri.</p></li>
<li><p>Click on any of the map types to change the map display.</p></li>
<li><p>Use the slider to adjust the significance level. The significance level ranges from 0.05 to 0.2.</p></li>
<li><p>Click on the slider and drag it to the desired significance level.</p></li>
<li><p>Select the type of recycling bin you wish to view by clicking on the dropdown menu.</p></li>
<li><p>There are a total of 3 types of recycling bins available: Blue Bin, E-Waste Bin and Incentive Bin.</p></li>
<li><p>Click on any of the recycling bin types to filter the data and view the distribution of the selected recycling bin type.</p></li>
<li><p>Use the zoom in and zoom out buttons to adjust the map view.</p></li>
<li><p>Hover over the area to view the value of GI*.</p></li>
<li><p>Click on the area to view the details of the selected area.</p></li>
</ol>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>